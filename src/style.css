:root {
  --bg: #040705;
  --panel: rgba(9, 18, 13, 0.92);
  --panel-soft: rgba(6, 12, 9, 0.9);
  --border: #2a5e42;
  --accent: #88ffc1;
  --text: #d9ffe9;
  --text-dim: #78a58d;
  --font-mono: "Share Tech Mono", monospace;
  --font-ui: "Space Grotesk", sans-serif;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: var(--font-mono);
  color: var(--text);
  background:
    radial-gradient(circle at 20% 0%, rgba(31, 87, 57, 0.2), transparent 40%),
    radial-gradient(circle at 90% 10%, rgba(23, 71, 47, 0.14), transparent 36%),
    var(--bg);
}

.app {
  min-height: 100vh;
  padding: 18px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  position: relative;
  overflow: hidden;
}

.header {
  border: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(8, 18, 13, 0.95), rgba(7, 11, 9, 0.92));
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 14px;
  text-transform: uppercase;
  letter-spacing: 0.12em;
}

.header__echo {
  color: var(--accent);
  font-family: var(--font-ui);
}

.header__name {
  color: var(--text-dim);
}

.layout {
  display: grid;
  grid-template-columns: 1.2fr 1fr;
  gap: 12px;
  flex: 1;
}

.left-stack {
  display: grid;
  grid-template-rows: auto auto auto auto;
  gap: 12px;
  align-content: start;
}

.panel {
  border: 1px solid var(--border);
  background: linear-gradient(150deg, var(--panel), var(--panel-soft));
  position: relative;
  box-shadow: inset 0 0 14px rgba(118, 255, 180, 0.08);
}

.panel__title {
  border-bottom: 1px solid var(--border);
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.16em;
  font-size: 0.72rem;
  padding: 8px 10px;
}

.panel__body {
  padding: 12px 14px;
  white-space: pre-line;
  line-height: 1.45;
}

#vitals {
  white-space: normal;
}

.panel__body--actions {
  min-height: 160px;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-content: center;
  align-items: center;
  gap: 10px;
}

.panel__body--actions-centered {
  min-height: 220px;
}

.panel__body--map {
  white-space: pre;
  font-size: 0.8rem;
  line-height: 1.2;
}

.panel__body--log {
  max-height: 74vh;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.panel__body--nav {
  display: grid;
  gap: 10px;
}

.vitals-band {
  display: grid;
  grid-template-columns: 1.1fr 1fr;
  gap: 16px;
  align-items: center;
}

.vitals-band__time {
  font-size: 1.6rem;
  letter-spacing: 0.2em;
  font-family: var(--font-mono);
  color: var(--accent);
  text-shadow:
    0 0 8px rgba(122, 248, 180, 0.5),
    0 0 18px rgba(122, 248, 180, 0.25);
  text-transform: uppercase;
}

.vitals-band__meters {
  display: grid;
  gap: 10px;
}

.vitals-meter {
  display: grid;
  gap: 6px;
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.14em;
}

.vitals-meter__label {
  color: var(--text-dim);
}

.vitals-meter__bar {
  position: relative;
  height: 8px;
  border: 1px solid var(--border);
  background: rgba(6, 10, 8, 0.7);
  overflow: hidden;
}

.vitals-meter__bar span {
  position: absolute;
  inset: 0 auto 0 0;
  width: 0%;
  background: linear-gradient(90deg, rgba(111, 255, 184, 0.4), rgba(136, 255, 193, 0.9));
  box-shadow: 0 0 10px rgba(122, 248, 180, 0.45);
}

.vitals-meter__bar--heat span {
  background: linear-gradient(90deg, rgba(255, 170, 110, 0.35), rgba(255, 211, 122, 0.85));
  box-shadow: 0 0 10px rgba(255, 190, 120, 0.45);
}

.vitals-meter__value {
  color: var(--text);
  font-size: 0.72rem;
  letter-spacing: 0.08em;
}

#log-panel {
  min-height: 360px;
}

.action-button,
.nav-button,
#wake-button,
#death-button,
#restart-button {
  border: 1px solid #5ad79a;
  background: rgba(112, 255, 185, 0.1);
  color: var(--accent);
  font-family: var(--font-ui);
  font-size: 0.74rem;
  text-transform: uppercase;
  letter-spacing: 0.14em;
  padding: 9px 12px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

#wake-button {
  animation: wake-pulse 2s ease-in-out infinite;
}

.action-button::before {
  content: "";
  position: absolute;
  inset: 0 auto 0 0;
  width: calc(var(--cooldown-fill, 0) * 100%);
  background: rgba(112, 255, 185, 0.24);
  transition: width 100ms linear;
}

.action-button > span,
.nav-button > span {
  position: relative;
}

.action-button:disabled,
.nav-button:disabled {
  opacity: 0.5;
  cursor: default;
}

.action-button--stoke {
  animation: stoke-pulse 2s ease-in-out infinite;
}

.action-button:hover:not(:disabled),
.nav-button:hover:not(:disabled),
#wake-button:hover,
#death-button:hover,
#restart-button:hover {
  background: rgba(112, 255, 185, 0.2);
}

.nav-row {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: center;
}

.nav-row__label {
  color: var(--text);
}

.nav-row__current {
  color: var(--text-dim);
  border: 1px solid var(--border);
  padding: 8px 10px;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  font-size: 0.7rem;
}

.log-entry {
  animation: log-fade 36s linear forwards;
}

.log-entry--system {
  color: #8ddfb0;
}

.log-entry--narrative {
  color: #ddfff0;
}

.log-entry__text {
  white-space: pre-wrap;
}

.wake-screen,
.boot-screen,
.demo-modal,
.death-modal {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  z-index: 20;
  background: rgba(2, 6, 4, 0.97);
}

.wake-card,
.boot-screen__frame,
.demo-modal__card,
.death-modal__card {
  border: 1px solid var(--border);
  background: rgba(8, 14, 10, 0.96);
  padding: 20px;
  width: min(520px, 92vw);
  text-align: center;
  box-shadow: inset 0 0 18px rgba(113, 255, 181, 0.08);
}

.wake-card p,
.demo-modal__card p,
.death-modal__card p {
  margin: 0 0 16px;
  color: var(--text-dim);
  font-size: 1.1rem;
}

#death-message {
  white-space: pre-line;
}

.boot-screen__title {
  text-transform: uppercase;
  letter-spacing: 0.16em;
  color: var(--accent);
  margin-bottom: 10px;
  text-align: left;
}

.boot-screen__lines {
  min-height: 120px;
  text-align: left;
  color: var(--text-dim);
  margin-bottom: 12px;
}

.boot-screen__line {
  opacity: 0;
  animation: boot-line 180ms ease-out forwards;
}

.boot-screen__meter {
  border: 1px solid var(--border);
  height: 10px;
}

.boot-screen__meter span {
  display: block;
  height: 100%;
  width: 0;
  background: linear-gradient(90deg, #335f46, #84ffc2);
  transition: width 220ms linear;
}

.scanlines,
.noise,
.glow {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.scanlines {
  background: repeating-linear-gradient(
    to bottom,
    rgba(241, 255, 247, 0.018),
    rgba(241, 255, 247, 0.018) 1px,
    transparent 1px,
    transparent 3px
  );
  opacity: 0.24;
}

.noise {
  background-image: radial-gradient(rgba(145, 255, 198, 0.08) 0.5px, transparent 0.5px);
  background-size: 3px 3px;
  opacity: 0.07;
  animation: noise-shift 130ms steps(2) infinite;
}

.glow {
  inset: -34px;
  border: 1px solid rgba(122, 248, 180, 0.08);
  box-shadow: 0 0 120px rgba(90, 240, 164, 0.1);
}

.is-hidden {
  display: none !important;
}

@keyframes noise-shift {
  0% { transform: translate(0, 0); }
  25% { transform: translate(1px, -1px); }
  50% { transform: translate(-1px, 1px); }
  75% { transform: translate(1px, 1px); }
  100% { transform: translate(0, 0); }
}

@keyframes boot-line {
  from { opacity: 0; transform: translateY(1px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes log-fade {
  0% { opacity: 1; filter: blur(0); }
  75% { opacity: 0.9; }
  100% { opacity: 0; filter: blur(1px); }
}

@keyframes wake-pulse {
  0%,
  100% {
    box-shadow: 0 0 8px rgba(122, 248, 180, 0.2);
  }
  50% {
    box-shadow: 0 0 20px rgba(122, 248, 180, 0.5);
  }
}

@keyframes stoke-pulse {
  0%,
  100% {
    box-shadow: 0 0 8px rgba(122, 248, 180, 0.18);
  }
  50% {
    box-shadow: 0 0 18px rgba(122, 248, 180, 0.42);
  }
}

@media (max-width: 1100px) {
  .layout {
    grid-template-columns: 1fr;
  }

  .panel__body--log {
    max-height: 320px;
  }
}
